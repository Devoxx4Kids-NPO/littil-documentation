@startuml
package auth0 {
    entity Auth0User {
        - id: String
        ..
        - emailAddress: String
        - roles: Roles[]
        - locale: String
    }

    note left of Auth0User::id
        The id which is generated by the provider
        should contain a prefix to make sure they
        are unique cross platform. Currently only
        auth0 is supported which prefixes the id by
        default with `auth0|`.

        Also, e-mail address should be a unique
        platform wide.
    end note
}

package LiTTiL {
    entity User {
        - id: String
        ..
        - provider: Provider:AUTH0
        - provider_id: String
        --
        - emailAddress: String
        - roles: Roles[]
        --
        - guestTeacher_id: UUID
        - school_id: UUID
    }

    entity GuestTeacher {
        - id: UUID
        ..
        - firstName: String
        - surname: String
        - location: Location
        - availability: Set<DayOfWeek>
    }

    entity School {
        - id: UUID
        ..
        - name: String
        - contactPersonName: String
        - location: Location
    }

    entity Location {
        - id: UUID
        - country: String
        - address: String
        - postalCode: String
        - longitude: Integer
        - latitude: Integer
    }

    entity UserSetting <<Serializable>>{
        user_id: String
        key: String
        ..
        value: String
    }

    note left of UserSetting
        Settings are really generic.
        The frontend can store any
        setting they like by
        introducing a new key.
    end note
}
    Auth0User::emailAddress -- User::emailAddress

    GuestTeacher::id *-- User::guestTeacher_id: "0..1"
    School::id *-- User::school_id: "0..1"

    Location --- GuestTeacher::location: "1..1"
    Location -- School::location : "1..1"

    User --* UserSetting : "1..*"
@enduml