<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="422px" preserveAspectRatio="none" style="width:952px;height:422px;background:#FFFFFF;" version="1.1" viewBox="0 0 952 422" width="952px" zoomAndPan="magnify"><defs/><g><rect fill="#F18F2D" height="203.9297" style="stroke:#181818;stroke-width:1.0;" width="10" x="73.5" y="124.8594"/><rect fill="#F9B233" height="87.3984" style="stroke:#181818;stroke-width:1.0;" width="10" x="287.5" y="241.3906"/><rect fill="#F18F2D" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="514.5" y="270.5234"/><rect fill="#F9B233" height="87.3984" style="stroke:#181818;stroke-width:1.0;" width="10" x="623.5" y="124.8594"/><rect fill="#F18F2D" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="870.5" y="153.9922"/><rect fill="#DFEFFC" height="250.1953" style="stroke:#000000;stroke-width:1.5;" width="936.5" x="10" y="86.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="78" x2="78" y1="69.5938" y2="353.7891"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="292" x2="292" y1="69.5938" y2="353.7891"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="519.5" x2="519.5" y1="69.5938" y2="353.7891"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="628.5" x2="628.5" y1="69.5938" y2="353.7891"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="875.5" x2="875.5" y1="69.5938" y2="353.7891"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="78" x="36.5" y="49.9951">«backend»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="20" y="66.292">Location service</text><path d="M58,9 L58,33 M58,21 L75,21 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><ellipse cx="87" cy="21" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="78" x="36.5" y="365.7842">«backend»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="20" y="382.0811">Location service</text><path d="M58,389.3828 L58,413.3828 M58,401.3828 L75,401.3828 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><ellipse cx="87" cy="401.3828" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="78" x="250.5" y="49.9951">«backend»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="131" x="224" y="66.292">Location repository</text><ellipse cx="292.5" cy="21" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="288.5,9,294.5,4,292.5,9,294.5,14,288.5,9" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="78" x="250.5" y="365.7842">«backend»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="131" x="224" y="382.0811">Location repository</text><ellipse cx="292.5" cy="401.3828" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="288.5,389.3828,294.5,384.3828,292.5,389.3828,294.5,394.3828,288.5,389.3828" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="78" x="477.5" y="49.9951">«backend»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94" x="469.5" y="66.292">Littil database</text><ellipse cx="519.5" cy="21" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="507.5" x2="531.5" y1="35" y2="35"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="78" x="477.5" y="365.7842">«backend»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94" x="469.5" y="382.0811">Littil database</text><ellipse cx="519.5" cy="401.3828" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="507.5" x2="531.5" y1="415.3828" y2="415.3828"/><path d="M584.5,27 L672.5,27 C677.5,27 677.5,48.2969 677.5,48.2969 C677.5,48.2969 677.5,69.5938 672.5,69.5938 L584.5,69.5938 C579.5,69.5938 579.5,48.2969 579.5,48.2969 C579.5,48.2969 579.5,27 584.5,27 " fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M672.5,27 C667.5,27 667.5,48.2969 667.5,48.2969 C667.5,69.5938 672.5,69.5938 672.5,69.5938 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="78" x="584.5" y="44.9951">«backend»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="589" y="61.292">Event bus</text><path d="M584.5,352.7891 L672.5,352.7891 C677.5,352.7891 677.5,374.0859 677.5,374.0859 C677.5,374.0859 677.5,395.3828 672.5,395.3828 L584.5,395.3828 C579.5,395.3828 579.5,374.0859 579.5,374.0859 C579.5,374.0859 579.5,352.7891 584.5,352.7891 " fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M672.5,352.7891 C667.5,352.7891 667.5,374.0859 667.5,374.0859 C667.5,395.3828 672.5,395.3828 672.5,395.3828 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="78" x="584.5" y="370.7842">«backend»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="589" y="387.0811">Event bus</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="78" x="833.5" y="49.9951">«backend»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116" x="814.5" y="66.292">Google API client</text><path d="M855,9 L855,33 M855,21 L872,21 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><ellipse cx="884" cy="21" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="78" x="833.5" y="365.7842">«backend»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116" x="814.5" y="382.0811">Google API client</text><path d="M855,389.3828 L855,413.3828 M855,401.3828 L872,401.3828 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><ellipse cx="884" cy="401.3828" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#F18F2D" height="203.9297" style="stroke:#181818;stroke-width:1.0;" width="10" x="73.5" y="124.8594"/><rect fill="#F9B233" height="87.3984" style="stroke:#181818;stroke-width:1.0;" width="10" x="287.5" y="241.3906"/><rect fill="#F18F2D" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="514.5" y="270.5234"/><rect fill="#F9B233" height="87.3984" style="stroke:#181818;stroke-width:1.0;" width="10" x="623.5" y="124.8594"/><rect fill="#F18F2D" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="870.5" y="153.9922"/><path d="M10,86.5938 L347,86.5938 L347,93.7266 L337,103.7266 L10,103.7266 L10,86.5938 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="250.1953" style="stroke:#000000;stroke-width:1.5;" width="936.5" x="10" y="86.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="292" x="25" y="99.6606">Asynchronous location data enrichment</text><polygon fill="#2B2E83" points="611.5,120.8594,621.5,124.8594,611.5,128.8594,615.5,124.8594" style="stroke:#2B2E83;stroke-width:1.0;"/><line style="stroke:#2B2E83;stroke-width:1.0;" x1="83.5" x2="617.5" y1="124.8594" y2="124.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="90.5" y="119.7935">On upsert event</text><polygon fill="#2B2E83" points="858.5,149.9922,868.5,153.9922,858.5,157.9922,862.5,153.9922" style="stroke:#2B2E83;stroke-width:1.0;"/><line style="stroke:#2B2E83;stroke-width:1.0;" x1="633.5" x2="864.5" y1="153.9922" y2="153.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="193" x="640.5" y="148.9263">Fetch long and lat coordinates</text><polygon fill="#2B2E83" points="644.5,179.125,634.5,183.125,644.5,187.125,640.5,183.125" style="stroke:#2B2E83;stroke-width:1.0;"/><line style="stroke:#2B2E83;stroke-width:1.0;" x1="638.5" x2="874.5" y1="183.125" y2="183.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="213" x="650.5" y="178.0591">Found corresponding coordinates</text><polygon fill="#2B2E83" points="94.5,208.2578,84.5,212.2578,94.5,216.2578,90.5,212.2578" style="stroke:#2B2E83;stroke-width:1.0;"/><line style="stroke:#2B2E83;stroke-width:1.0;" x1="88.5" x2="627.5" y1="212.2578" y2="212.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192" x="100.5" y="207.1919">Found additional location data</text><polygon fill="#2B2E83" points="275.5,237.3906,285.5,241.3906,275.5,245.3906,279.5,241.3906" style="stroke:#2B2E83;stroke-width:1.0;"/><line style="stroke:#2B2E83;stroke-width:1.0;" x1="83.5" x2="281.5" y1="241.3906" y2="241.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="90.5" y="236.3247">Store coordinates to location</text><polygon fill="#2B2E83" points="502.5,266.5234,512.5,270.5234,502.5,274.5234,506.5,270.5234" style="stroke:#2B2E83;stroke-width:1.0;"/><line style="stroke:#2B2E83;stroke-width:1.0;" x1="297.5" x2="508.5" y1="270.5234" y2="270.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="198" x="304.5" y="265.4575">update additional location data</text><polygon fill="#2B2E83" points="308.5,295.6563,298.5,299.6563,308.5,303.6563,304.5,299.6563" style="stroke:#2B2E83;stroke-width:1.0;"/><line style="stroke:#2B2E83;stroke-width:1.0;" x1="302.5" x2="518.5" y1="299.6563" y2="299.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="314.5" y="294.5903">persisted</text><polygon fill="#2B2E83" points="89.5,324.7891,79.5,328.7891,89.5,332.7891,85.5,328.7891" style="stroke:#2B2E83;stroke-width:1.0;"/><line style="stroke:#2B2E83;stroke-width:1.0;" x1="83.5" x2="291.5" y1="328.7891" y2="328.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140" x="95.5" y="323.7231">Coordinates persisted</text><!--MD5=[0674f68c1f8f79924ab74608b1abeda3]
@startuml
skinparam sequence {
    ArrowColor #2B2E83
    GroupBackgroundColor #FFFFFF
}

boundary "Location service"             as location_service <<backend>>
control "Location repository"           as location_repository <<backend>>
entity "Littil database"            as littil_database <<backend>>
queue "Event bus"                   as internal_event_bus <<backend>>
boundary "Google API client"        as backend_google_client <<backend>>

group #DFEFFC Asynchronous location data enrichment
location_service -> internal_event_bus : On upsert event
activate location_service #F18F2D
activate internal_event_bus #F9B233
internal_event_bus -> backend_google_client : Fetch long and lat coordinates
activate backend_google_client #F18F2D
internal_event_bus <- backend_google_client : Found corresponding coordinates
deactivate backend_google_client
location_service <- internal_event_bus : Found additional location data
deactivate internal_event_bus
location_service -> location_repository : Store coordinates to location
activate location_repository #F9B233
location_repository -> littil_database : update additional location data
activate littil_database #F18F2D
location_repository <- littil_database : persisted
deactivate littil_database
location_service <- location_repository : Coordinates persisted
deactivate location_repository
deactivate location_service
end
@enduml

PlantUML version 1.2022.5(Sat Apr 30 10:55:52 GMT 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>